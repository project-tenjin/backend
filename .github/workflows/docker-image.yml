name: Docker Image CI
on:
 push:
   branches: [ "master" ]
 pull_request:
   branches: [ "master" ]
jobs:
 build:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v3
     - name: Build Javascript tester
       run: docker build . --file Dockerfile --target tester --tag "backend:tester_${{github.sha}}"
     - name: Test Javascript
       run: docker run --name backend-tester --rm "backend:tester_${{github.sha}}"